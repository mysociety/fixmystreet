[% INCLUDE 'header.html', title = loc('Change password'), bodyclass = 'authpage' %]

<h1>[% loc('Change password') %]</h1>

[% IF password_changed %]
    <p class="form-success">[% loc('Your password has been changed') %]</p>
[% END %]


<form action="[% c.uri_for('change_password') %]" method="post" name="change_password" class="fieldset">
    <input type="hidden" name="token" value="[% csrf_token %]">
    
    [% IF password_error;

        errors = {
            missing  => loc('Please enter a password'),
            mismatch => loc('The passwords do not match'),
            other    => loc('Please check the passwords and try again'),
        };
        
        loc_password_error = errors.$password_error || errors.other; %]
    <div class="form-error">[% loc_password_error %]</div>
    [% END %]

    <div class="form-field">
        <label for="new_password">[% loc('Password:') %]</label>
        <input type="password" name="new_password" value="[% new_password | html %]">
    </div>
    <div class="form-field">
        <label for="confirm">[% loc('Again:') %]</label>
        <input type="password" name="confirm" value="[% confirm | html %]">
    </div>
    <div class="checkbox">
        <input type="submit" value="[% loc('Change password') %]">
    </div>

</form>


[% INCLUDE 'footer.html' %]
