[% SET title = form.title ~%]
[% PROCESS 'waste/header.html' %]

[% PROCESS 'govuk/fields.html' %]
[% PROCESS back %]
[% PROCESS errors %]
[% PROCESS title %]
[% IF property %]
  [% INCLUDE 'waste/_address_display.html' %]
[% END %]

<form class="waste" method="post" enctype="multipart/form-data">
  [% FOR num IN [ 1 .. form.MAX_ITEMS ] %]
    [% form.field( 'item_' _ num ).field('item').renderx( 'element_class', 'js-autocomplete') | safe %]
    [% form.field( 'item_' _ num ).field('image').render | safe %]
    [% PROCESS extra_text num = num %]
    <hr>
  [% END %]
  [% PROCESS form override_fields = [ 'continue', 'saved_data', 'token', 'process', 'unique_id' ] %]
</form>

[% # XXX If JS enabled, hide unless relevant item selected %]
[% BLOCK extra_text %]
  [% FOR item_desc IN form.items_extra_text.keys %]
    [% id = 'item_' _ num _ '.' _ form.format_item_string(item_desc) _ '.extra_text' %]
    <div id="[% id %]"><b>[% item_desc %]: [% form.items_extra_text.$item_desc %]</b></div>
  [% END %]
[% END %]

[% INCLUDE footer.html %]
